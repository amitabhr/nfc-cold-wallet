<Page xmlns="http://schemas.nativescript.org/tns.xsd"
  xmlns:RL="nativescript-ripple" loaded="pageLoaded">

  <ActionBar title="vaultbar">
    <StackLayout orientation="horizontal" ios:horizontalAlignment="center" android:horizontalAlignment="left">
      <Image src="~/res/nfc.png" class="action-image"></Image>
      <Label text="CryptoVault" class="action-label"></Label>
    </StackLayout>
    <ActionItem tap="{{ hideKeyboard }}" icon="~/res/new.png" ios.position="right" android.position="actionBar"></ActionItem>
  </ActionBar>

  <BottomNavigation selectedIndex="1">

    <!-- The bottom tab UI is created via TabStrip (the containier) and TabStripItem (for each tab)-->
    <TabStrip>
      <TabStripItem>
        <Label text="Seed"></Label>
        <Image src="~/res/paper.png"></Image>
      </TabStripItem>
      <TabStripItem class="special">
        <Label text="NFC"></Label>
        <Image src="~/res/nfc-mobile.png"></Image>
      </TabStripItem>
      <TabStripItem>
        <Label text="About"></Label>
        <Image src="~/res/info.png"></Image>
      </TabStripItem>
    </TabStrip>

    <!-- The number of TabContentItem components should corespond to the number of TabStripItem components -->
    <TabContentItem>
      <ScrollView>
        <StackLayout class="bg-custom">
          <StackLayout class="nt-form">
            <StackLayout class="nt-input">
              <Label text="Your mnemonic seed" class="font-weight-bold m-b-5" />
              <TextView hint="Enter seed words..." autocapitalizationType="none" autocorrect="false" textChange="{{ onSeedChange }}"></TextView>

              <Button text="Encrypt seed" tap="{{ encryptSeed }}" class="button" width="80%" />
            </StackLayout>
          </StackLayout>

          <StackLayout class="hr hr-dark" />

          <StackLayout class="nt-input">
            <Label text="Your stored seeds" class="font-weight-bold m-b-5" />
            <Repeater items="{{ seedList }}">
              <Repeater.itemsLayout>
                <StackLayout orientation="vertical" />
              </Repeater.itemsLayout>
              <Repeater.itemTemplate>
                <StackLayout className="seedLayout" orientation="horizontal">
                  <Label fontSize="16" text="{{ $value.name }}" width="10%" />
                  <Label fontSize="16" text="{{ $value.encryptedSeed }}" width="40%" />
                  <RL:Ripple id="{{ $value.encryptedSeed }}" tap="{{ $value.decrypt }}">
                    <Image src="~/res/lock.png" width="80px" class="button" />
                  </RL:Ripple>
                  <RL:Ripple id="{{ $value.encryptedSeed }}" tap="{{ $value.decrypt }}">
                    <Image src="~/res/download.png" width="80px" class="button" />
                  </RL:Ripple>
                  <RL:Ripple id="{{ $value.encryptedSeed }}" tap="{{ $value.decrypt }}">
                    <Image src="~/res/write.png" width="80px" class="button" />
                  </RL:Ripple>
                  <GridLayout rows="auto" columns="*">
                    <RL:Ripple id="{{ $value.encryptedSeed }}" tap="{{ $value.remove }}">
                      <Image src="~/res/trash.png" horizontalAlignment="right" width="80px" class="button" />
                    </RL:Ripple>
                  </GridLayout>
                </StackLayout>
              </Repeater.itemTemplate>
            </Repeater>
          </StackLayout>

          <Label text="{{ getSeedList() }}" class="message message-ndef" textWrap="true" />
          <Label text="{{ lastNdefDiscovered }}" class="message message-ndef" textWrap="true" />

        </StackLayout>
      </ScrollView>
    </TabContentItem>
    <TabContentItem>
      <ScrollView>
        <StackLayout class="nt-input">
          <Label text="NFC" class="font-weight-bold m-b-5" />
          <StackLayout orientation="horizontal" width="100%">
            <Button text="NFC available?" tap="{{ doCheckAvailable }}" class="-primary -rounded-lg" width="40%" />
            <Button text="NFC enabled?" tap="{{ doCheckEnabled }}" class="button button-a" width="40%" />
          </StackLayout>

          <StackLayout orientation="horizontal" width="100%">
            <Button text="set ndef listener" tap="{{ doStartNdefListener }}" class="button" width="40%"/>
            <Button text="clear ndef listener" tap="{{ doStopNdefListener }}" class="button" width="40%"/>
          </StackLayout>

          <Android>
            <StackLayout orientation="horizontal" width="100%">
              <Button text="set tag listener" tap="{{ doStartTagListener }}" class="button" width="40%"/>
              <Button text="clear tag listner" tap="{{ doStopTagListener }}" class="button" width="40%"/>
            </StackLayout>

            <StackLayout orientation="horizontal" width="100%">
              <Button text="write Text" tap="{{ doWriteText }}" class="button button-d" width="40%" />
              <Button text="write Uri" tap="{{ doWriteUri }}" class="button button-d" width="40%" />
            </StackLayout>
            <Button text="erase tag" tap="{{ doEraseTag }}" class="button button-c" />
          </Android>
        </StackLayout>
      </ScrollView>>
    </TabContentItem>
    <TabContentItem>
      <GridLayout>
        <Label text="About Page" class="h2 text-center"></Label>
      </GridLayout>
    </TabContentItem>

  </BottomNavigation>


</Page>